sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,r,s,n){"use strict";return e.extend("vendorportal.controller.SupplierList",{onInit:function(){this.getOwnerComponent().getRouter().getRoute("SupplierList").attachPatternMatched(this._onRouteMatched,this);this._refreshInterval=null},onExit:function(){if(this._refreshInterval){clearInterval(this._refreshInterval)}},onSupplierPress:function(e){const t=e.getParameter("listItem");const r=t.getBindingContext();const s=r.getObject();const n=s.supplierName;const i=this.getOwnerComponent().getRouter();i.navTo("SupplierDetail",{supplierId:n})},onFilterSuppliers:function(){const e=this.byId("supplierTable");const t=e.getBinding("items");const r=this.byId("filterName").getValue();const i=this.byId("filterCity").getValue();const o=this.byId("filterStatus").getSelectedKey();const a=[];if(r){a.push(new s("supplierName",n.Contains,r))}if(i){a.push(new s("mainAddress/city",n.Contains,i))}if(o){a.push(new s("status",n.EQ,o))}t.filter(a)},onClearFilters:function(){this.byId("filterName").setValue("");this.byId("filterCity").setValue("");this.byId("filterStatus").setSelectedKey("");this.onFilterSuppliers()},onNavBack:function(){const e=sap.ui.core.routing.History.getInstance();const t=e.getPreviousHash();if(t!==undefined){window.history.go(-1)}else{this.getOwnerComponent().getRouter().navTo("View1",{},true)}},formatStatusType:function(e){if(!e){return"Transparent"}e=e.toUpperCase();switch(e){case"APPROVED":return"Accept";case"REJECTED":return"Reject";case"PENDING":return"Attention";default:return"Transparent"}},_onRouteMatched:function(){this._fetchSuppliers();if(this._refreshInterval){clearInterval(this._refreshInterval)}this._refreshInterval=setInterval(()=>{this._fetchSuppliers()},15e3)},_fetchSuppliers:function(){fetch(this.getURL()+"/odata/v4/supplier/getsuppliers").then(e=>e.json()).then(e=>{const r=Array.isArray(e.value)?e.value:e;this.getView().setModel(new t({suppliers:r}))}).catch(e=>{r.error("Error fetching suppliers: "+e.message)})},getURL:function(){return sap.ui.require.toUrl("vendorportal")}})});
//# sourceMappingURL=SupplierList.controller.js.map